# Гайд
Для работы скриптов на хосте должны быть установлены пакеты `jq` и `smartmontools`
В случае их отсутсвия не будут работать скрипты автообнаружения дисков, а так же zabbix-server высветит предупреждение

## Шаг 1 - разносим файлы
### zabbix-конфиг
Все файлы из [!папки с конфигами](./zabbix-config/) закидыаем в `/etc/zabbix/zabbix_agentd.conf.d`

### Скрипты
Все файлы из [!папки со скриптами](./scripts/) закидываем в директорию `/etc/scripts/monitoring/`
Если такой директории нет - создайте
Можно закидывать скрипты в свою директорию, но в таком случае нужно править заббикс конфиг-файл `nz_smart.conf`

## Шаг 2 - импортируем zabbix-шаблон
### Шаблон 
В web-панели zabbix импортируйте все шаблоны из [!папки с шаблонами](./zabbix-template/)

## Шаг 3 - настройка прав
### sudo smartctl
Необходимо выдать пользователю `zabbix` доступ к запуску `smartctl` через `sudo`
Для этого выполняем команды:
    `which smartctl` - выводит полный путь до утилиты smartctl. Если она не установлена, то устанавливаем пакет `smartmontools`
    `visudo` - откроется файл `/etc/sudoers`. 
        В нем нужно выдаем разрешение пользователю `zabbix` на запуск `smartctl` через `sudo` без пароля. 
        Для этого в файл добавляем строку `zabbix ALL=(root) NOPASSWD: <полный путь до smartctl>`, сохраняем и закрываем файл